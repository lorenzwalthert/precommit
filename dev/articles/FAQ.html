<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FAQ • precommit</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="FAQ">
<meta property="og:description" content="Common questions and answers for pre-commit users.
">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">precommit</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.4.3.9004</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/precommit.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/why-use-hooks.html">Why is this useful?</a>
    </li>
    <li>
      <a href="../articles/available-hooks.html">Available Hooks</a>
    </li>
    <li>
      <a href="../articles/ci.html">Continuous Integration</a>
    </li>
    <li>
      <a href="../articles/FAQ.html">FAQ</a>
    </li>
    <li class="divider">
    </li>
<li>
      <a href="../articles/index.html">More articles...</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/lorenzwalthert/precommit/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>

    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>FAQ</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/lorenzwalthert/precommit/blob/main/vignettes/FAQ.Rmd" class="external-link"><code>vignettes/FAQ.Rmd</code></a></small>
      <div class="hidden name"><code>FAQ.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="its-broken--missing-packages-etc--how-do-i-fix-it">It’s broken. Missing packages etc. How do I fix it?<a class="anchor" aria-label="anchor" href="#its-broken--missing-packages-etc--how-do-i-fix-it"></a>
</h2>
<p>Update the hook revisions with <code>$ pre-commit autoupdate</code>
or <code>&gt; precommit::autoupdate()</code>. If this does not help,
please follow the <a href="https://lorenzwalthert.github.io/precommit/dev/articles/precommit.html#update">update
instructions</a> in the package documentation. If that does not work,
run <code>$ pre-commit clean</code> to clean the pre-commit cache. Then,
try again. Although you could also clear the {renv} cache, this should
only be a strategy of last resort, as it may break other {renv} projects
on your machine and you’d have to do some re-storing there.</p>
</div>
<div class="section level2">
<h2 id="how-does-it-work-whats-the-magic">How does it work? What’s the magic?<a class="anchor" aria-label="anchor" href="#how-does-it-work-whats-the-magic"></a>
</h2>
<p>No magic. Git <a href="https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks" class="external-link">provides
a mechanism for pre-commit hooks</a>. Since it’s cumbersome to copy bash
scripts and keep them updated in some hidden <code>.git/</code>
directory, people wrote frameworks to basically maintain these files.
One of them is <a href="https://pre-commit.com" class="external-link">pre-commit.com</a>. So
you call git to commit, git calls its internal hooks, these hooks (bash
scripts in the simplest case) are provided by the pre-commit framework.
And where does pre-commit get all it’s nice hooks from? From us.</p>
</div>
<div class="section level2">
<h2 id="how-are-hooks-accessed-what-happens-if-theres-no-internet-connection">How are hooks accessed? What happens if there’s no internet
connection?<a class="anchor" aria-label="anchor" href="#how-are-hooks-accessed-what-happens-if-theres-no-internet-connection"></a>
</h2>
<p>Internet connection is required during installation
(<code><a href="../reference/install_precommit.html">precommit::install_precommit()</a></code>) and project initialization
(<code><a href="../reference/use_precommit.html">precommit::use_precommit()</a></code>) as well as when hooks are
updated (<code><a href="../reference/autoupdate.html">precommit::autoupdate()</a></code>). Otherwise, no internet
connection is required. During initialization, hooks from this repo will
be placed in a virtual environment within the user cache and upon
committing, they are called from a generic hook helper in
<code>.git/hooks/</code>.</p>
</div>
<div class="section level2">
<h2 id="why-do-some-hooks-not-give-me-the-same-results-as-running-the-command-interactively">Why do some hooks not give me the same results as running the
command interactively?<a class="anchor" aria-label="anchor" href="#why-do-some-hooks-not-give-me-the-same-results-as-running-the-command-interactively"></a>
</h2>
<p>Note that starting with <code>precommit &gt; 0.1.3</code>, hooks run
in an isolated <a href="https://rstudio.github.io/renv/" class="external-link"><code>{renv}</code></a>,
leveraging <a href="https://pre-commit.com/#r" class="external-link">R as a supported
language</a> in the pre-commit framework. The version of a package you
use interactively (e.g. <a href="https://roxygen2.r-lib.org/" class="external-link">roxygen2</a> to document) might for
that reason be different from the one pre-commit uses. The point of
using pre-commit is to take mental burden off your shoulders (and
sometimes even caches results for speed), so there is no need to run
functionality covered by the hooks manually anyways. If you need to know
which package versions are used, look for the <code>renv.lock</code>
file in <a href="https://github.com/lorenzwalthert/precommit" class="external-link uri">https://github.com/lorenzwalthert/precommit</a> at the git
tag specified under <code>rev:</code> in your
<code>.pre-commit-config.yaml</code>.</p>
</div>
<div class="section level2">
<h2 id="can-you-use-it-outside-rstudio">Can you use it outside RStudio?<a class="anchor" aria-label="anchor" href="#can-you-use-it-outside-rstudio"></a>
</h2>
<p>Yes, all but the <code><a href="../reference/open_config.html">open_config()</a></code> and
<code><a href="../reference/open_config.html">open_wordlist()</a></code> to open files in RStudio.</p>
</div>
<div class="section level2">
<h2 id="can-i-use-the-hooks-provided-in-this-package-without-installing-the-r-package">Can I use the hooks provided in this package without installing the
R package?<a class="anchor" aria-label="anchor" href="#can-i-use-the-hooks-provided-in-this-package-without-installing-the-r-package"></a>
</h2>
<p>Yes, you don’t need to manually install this package. Although
technically speaking, this package will get installed into a virtual
environment isolated from your global and project library.</p>
</div>
<div class="section level2">
<h2 id="how-can-i-make-sure-that-my-contributors-are-using-the-hooks">How can I make sure that my contributors are using the hooks?<a class="anchor" aria-label="anchor" href="#how-can-i-make-sure-that-my-contributors-are-using-the-hooks"></a>
</h2>
<p>They must follow the installation instructions in the README,
i.e. run</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"lorenzwalthert/precommit"</span><span class="op">)</span></span>
<span><span class="fu">precommit</span><span class="fu">::</span><span class="fu"><a href="../reference/install_precommit.html">install_precommit</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">precommit</span><span class="fu">::</span><span class="fu"><a href="../reference/use_precommit.html">use_precommit</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The last call can be omitted by users who have <a href="https://pre-commit.com/#automatically-enabling-pre-commit-on-repositories" class="external-link">automatically
enabled pre-commit hooks</a>.</p>
<p>To enforce all hooks pass, you can follow the <a href="https://pre-commit.com/#usage-in-continuous-integration" class="external-link">advice on
how to use pre-commit in a CI/CD setup</a>.</p>
</div>
<div class="section level2">
<h2 id="should-i-list-precommit-as-a-dependency-of-my-package-in-description">Should I list <code>{precommit}</code> as a dependency of my package
in DESCRIPTION?<a class="anchor" aria-label="anchor" href="#should-i-list-precommit-as-a-dependency-of-my-package-in-description"></a>
</h2>
<p>No, precommit is a dev dependency like <a href="https://devtools.r-lib.org/" class="external-link">devtools</a>, so it
should not be listed in <code>DESCRIPTION</code>.</p>
</div>
<div class="section level2">
<h2 id="what-if-not-all-people-who-are-committing-to-this-repo-want-to-use-the-hooks">What if not all people who are committing to this repo want to use
the hooks?<a class="anchor" aria-label="anchor" href="#what-if-not-all-people-who-are-committing-to-this-repo-want-to-use-the-hooks"></a>
</h2>
<p>This is not a problem, git will only run the hooks in a local repo
after <code><a href="../reference/use_precommit.html">precommit::use_precommit()</a></code> has been run successfully
from within this local repo on your machine. You can also uninstall
anytime with <code><a href="../reference/uninstall_precommit.html">precommit::uninstall_precommit()</a></code>. Anyone who
does not want to use the hooks simply should not run
<code><a href="../reference/use_precommit.html">precommit::use_precommit()</a></code>. You can also temporarily
disable hooks using the environment variable <code>SKIP</code> or the
argument <code>--no-verify</code>, as described <a href="https://pre-commit.com/#temporarily-disabling-hooks" class="external-link">here</a>.</p>
</div>
<div class="section level2">
<h2 id="how-does-one-create-a-new-pre-commit-hook">How does one create a new pre-commit hook?<a class="anchor" aria-label="anchor" href="#how-does-one-create-a-new-pre-commit-hook"></a>
</h2>
<p>How to contribute new hooks is explained in <a href="https://github.com/lorenzwalthert/precommit/blob/main/CONTRIBUTING.md" class="external-link"><code>CONTRIBUTING.md</code></a>.</p>
<hr>
<p>There is more. Check out the documentation of the <a href="https://pre-commit.com" class="external-link">pre-commit</a> framework.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://lorenzwalthert.com" class="external-link">Lorenz Walthert</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({


    apiKey: 'ae5363c86f48f4117b4f2b9beaefa28f',
    indexName: 'lorenzwalthert_precommit',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
